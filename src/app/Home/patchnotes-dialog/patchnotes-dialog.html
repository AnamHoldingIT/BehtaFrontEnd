<!-- ๐ ุฏฺฉูู ุดูุงูุฑ Patch Notes -->
<button
  class="floating-updates-btn"
  type="button"
  aria-label="ูุดุงูุฏู ุขุฎุฑู ุขูพุฏุชโูุง"
  (click)="openModal()">

  <span class="btn-icon">
    <i class="bi bi-bell-fill"></i>
  </span>

  <span
    class="notification-dot"
    *ngIf="showNotificationDot">
  </span>
</button>

<!-- ๐ ููุฏุงู ุชุงูโูุงู ุขูพุฏุชโูุง -->
<div
  class="updates-modal-overlay"
  [class.active]="isOpen"
  (click)="onOverlayClick($event)"
  [attr.aria-hidden]="!isOpen">

  <div class="updates-modal-dialog glass-panel">

    <!-- ูุฏุฑ ููุฏุงู -->
    <div class="updates-modal-header">
      <div class="header-text">
        <h2 class="modal-title">ูุฑฺฉุฒ ูพุงู ู ุขูพุฏุชโูุง</h2>
        <p class="modal-subtitle">(MyApp) ูุณุฑ ุชฺฉุงูู ุขูุงู</p>
      </div>

      <button
        class="close-modal-btn"
        type="button"
        aria-label="ุจุณุชู ูพูุฌุฑู"
        (click)="closeModal()">
        <span class="close-icon-wrap">
          <i class="bi bi-x-lg"></i>
        </span>
      </button>
    </div>

    <!-- ุจุฏูู ุงุณฺฉุฑูู -->
    <div class="updates-modal-body custom-scrollbar">

      <!-- ููุฏูฺฏ ุณุงุฏู -->
      <div *ngIf="isLoading" class="loading-state">
        ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ุขูพุฏุชโูุง...
      </div>

      <!-- ุงุฑูุฑ -->
      <div *ngIf="hasError" class="error-state">
        ุฎุทุง ุฏุฑ ุฏุฑุงูุช ุงุทูุงุนุงุช ุฑุฎ ุฏุงุฏ. ูุทูุงู ุจุนุฏุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.
      </div>

      <!-- ุจุฏูู ุฏุงุฏู -->
      <div *ngIf="!isLoading && !hasError && !patchNotes.length" class="empty-state">
        ูููุฒ ูฺ ุขูพุฏุช ุนููู ููุชุดุฑ ูุดุฏู ุงุณุช.
      </div>

      <!-- ุชุงูโูุงู -->
      <div
        class="timeline-container"
        *ngIf="!isLoading && !hasError && patchNotes.length">

        <div
          class="timeline-item"
          *ngFor="let note of patchNotes; let i = index"
          [class.latest]="isLatest(i)">

          <!-- ูุงุฑฺฉุฑ -->
          <div class="timeline-marker">
            <span class="marker-dot"></span>
          </div>

          <!-- ฺฉุงุฑุช -->
          <div class="timeline-card glass-card">
            <div class="timeline-header">
              <span class="version-badge">
                {{ note.version }}
              </span>

              <span class="date">
                <!-- ุจุฑุง ุขุฎุฑู ุขูพุฏุชุ ูุชู ูุฎุตูุต -->
                {{ isLatest(i) ? 'ููู ุงูุงู' : (note.date | date:'yyyy/MM/dd') }}
              </span>

              <span
                class="status-pill"
                [ngClass]="{
                  'status-new': note.status === 'new',
                  'status-improvement': note.status === 'improvement',
                  'status-bugfix': note.status === 'bugfix',
                  'status-announcement': note.status === 'announcement'
                }">
                {{ statusLabel(note.status) }}
              </span>
            </div>

            <h3 class="update-title">
              {{ note.title }}
            </h3>

            <p
              class="update-desc"
              *ngIf="note.description">
              {{ note.description }}
            </p>

            <!-- ูุณุช ุขุชูโูุง -->
            <ul class="update-list" *ngIf="note.items.length">
              <li *ngFor="let item of note.items">
                <span
                  class="icon-circle"
                  [ngClass]="iconClass(item)">
                  <i [ngClass]="iconName(item)"></i>
                </span>
                <span>{{ item.text }}</span>
              </li>
            </ul>

          </div>
        </div>

      </div>
    </div>
  </div>
</div>
